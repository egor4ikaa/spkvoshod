<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фотогалерея СПК "Восход"</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="shortcut icon" href="orig.jpeg" type="jpeg">
    <link rel="stylesheet" href="album.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Альбом СПК "Восход"</h1>
            <p class="subtitle">Фотогалерея нашего сельскохозяйственного предприятия</p>
        </header>

        <div class="category-filters">
            <button class="filter-btn active" data-category="all">Все</button>
            <button class="filter-btn" data-category="work">Работа</button>
            <button class="filter-btn" data-category="building">Здания</button>
            <button class="filter-btn" data-category="staff">Персонал</button>
            <button class="filter-btn" data-category="equipment">Оборудование</button>
        </div>

        <div class="gallery-container">
            <div class="gallery-grid" id="galleryGrid">
                <!-- Фотографии будут добавляться через JavaScript -->
            </div>

            <button class="load-more" id="loadMore">Загрузить еще</button>
        </div>
    </div>
    <!-- Модальное окно для просмотра фото -->
    <div class="modal" id="imageModal">
        <span class="close-btn">&times;</span>
        <span class="nav-btn prev-btn">&lt;</span>
        <span class="nav-btn next-btn">&gt;</span>
        <div class="modal-content">
            <img class="modal-img" id="modalImage" alt="">
            <div class="modal-info">
                <h3 id="modalTitle"></h3>
                <p id="modalDate"></p>
            </div>
        </div>
    </div>
    <footer>
        <p>© 2025 СПК "Восход". Все права защищены.</p>
    </footer>
    <script>
        // Данные фотографий (в реальном проекте можно загружать с сервера)
        const photos = [
            { id: 1, src: 'rabota.jpg', title: 'Современная техника', category: 'work', date: '15.05.2023' },
            { id: 2, src: 'rabota-2.jpg', title: 'Работа в поле', category: 'work', date: '20.06.2024' },
            { id: 3, src: 'rabota-3.jpg', title: 'Сельхозтехника', category: 'work', date: '10.07.2024' },
            { id: 4, src: 'rabota-4.jpg', title: 'Уборочная кампания', category: 'work', date: '25.08.2024' },
            { id: 5, src: 'zdanie.jpg', title: 'Ферма СПК "Восход"', category: 'building', date: '05.04.2024' },
            { id: 6, src: 'ferma.jpg', title: 'Коровники', category: 'building', date: '12.04.2024' },
            { id: 7, src: 'milk_apparat.jpg', title: 'Молочное оборудование', category: 'equipment', date: '18.05.2024' },
            { id: 8, src: 'vladelec.jpg', title: 'Председатель Клековкин В.И.', category: 'staff', date: '01.03.2024' },
            { id: 9, src: 'personal-2.jpg', title: 'Работники фермы', category: 'staff', date: '15.03.2024' },
            { id: 10, src: 'personal-3.jpg', title: 'Специалисты', category: 'staff', date: '22.03.2024' },
            // Добавьте больше фотографий по необходимости
        ];

        // Элементы DOM
        const galleryGrid = document.getElementById('galleryGrid');
        const loadMoreBtn = document.getElementById('loadMore');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalTitle = document.getElementById('modalTitle');
        const modalDate = document.getElementById('modalDate');
        const closeBtn = document.querySelector('.close-btn');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');

        // Текущий индекс для пагинации
        let currentPage = 1;
        const photosPerPage = 8;

        function displayPhotos(filteredPhotos, page = 1) {
            galleryGrid.innerHTML = ''; // Очищаем галерею перед отображением новых фото
            
            const startIndex = (page - 1) * photosPerPage;
            const endIndex = startIndex + photosPerPage;
            const photosToShow = filteredPhotos.slice(startIndex, endIndex);
            
            photosToShow.forEach(photo => {
                const imgContainer = document.createElement('div');
                imgContainer.classList.add('gallery-item');
                
                const img = document.createElement('img');
                img.src = photo.src;
                img.alt = photo.title;
                img.loading = "lazy"; // Ленивая загрузка для оптимизации
                
                img.addEventListener('click', () => {
                    openModal(photo);
                });
                
                imgContainer.appendChild(img);
                galleryGrid.appendChild(imgContainer);
            });
            
            // Показываем/скрываем кнопку "Загрузить еще"
            loadMoreBtn.style.display = endIndex < filteredPhotos.length ? 'block' : 'none';
        }

        function filterPhotos(category) {
            const filteredPhotos = category === 'all' ? photos : photos.filter(photo => photo.category === category);
            currentPage = 1; // Сбрасываем страницу при фильтрации
            displayPhotos(filteredPhotos, currentPage);
        }

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                filterPhotos(btn.dataset.category);
            });
        });

        // Модальное окно
        function openModal(photo) {
            modalImage.src = photo.src;
            modalTitle.textContent = photo.title;
            modalDate.textContent = photo.date;
            imageModal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Блокируем прокрутку страницы
            
            // Устанавливаем текущий индекс для навигации
            currentImageIndex = photos.findIndex(p => p.id === photo.id);
        }

        function closeModal() {
            imageModal.style.display = 'none';
            document.body.style.overflow = 'auto'; // Восстанавливаем прокрутку страницы
        }

        closeBtn.addEventListener('click', closeModal);

        // Закрытие модального окна при клике вне изображения
        imageModal.addEventListener('click', (e) => {
            if (e.target === imageModal) {
                closeModal();
            }
        });

        // Функция для переключения картинок в модальном окне
        let currentImageIndex = 0;
        function showImage(index) {
            if (index < 0) {
                currentImageIndex = photos.length - 1;
            } else if (index >= photos.length) {
                currentImageIndex = 0;
            } else {
                currentImageIndex = index;
            }
            openModal(photos[currentImageIndex]);
        }

        prevBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showImage(currentImageIndex - 1);
        });
        
        nextBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showImage(currentImageIndex + 1);
        });

        // Навигация по клавиатуре
        document.addEventListener('keydown', (e) => {
            if (imageModal.style.display === 'block') {
                switch(e.key) {
                    case 'ArrowLeft':
                        showImage(currentImageIndex - 1);
                        break;
                    case 'ArrowRight':
                        showImage(currentImageIndex + 1);
                        break;
                    case 'Escape':
                        closeModal();
                        break;
                }
            }
        });

        // Загрузка дополнительных фотографий
        loadMoreBtn.addEventListener('click', () => {
            const activeFilter = document.querySelector('.filter-btn.active').dataset.category;
            const filteredPhotos = activeFilter === 'all' ? photos : photos.filter(photo => photo.category === activeFilter);
            currentPage++;
            displayPhotos(filteredPhotos, currentPage);
        });

        // Изначальное отображение всех фотографий
        displayPhotos(photos);
    </script>
</body>
</html>
